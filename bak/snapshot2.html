<!DOCTYPE HTML>
<html>
 <head>
  <title>Snapshot Page</title>
  <script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="js/amq_jquery_adapter.js"></script>
  <script type="text/javascript" src="js/amq.js"></script>

  <script type="text/javascript">
	//<mobile-reading id='1' ts='1449342613' pid='MA36PB256Y' step='1' spo2='98' xmin="" xmax="" xavg="" xstd="" ymin="" ymax="" yavg="" ystd="" zmin="" zmax="" zavg="" zstd="" rforce="" />
	var pid = "";
	var step = 0;
	var spo2 = 0;
	var xmin = 0;
    var xmax = 0;
	var xavg = 0;
	var xstd = 0;
	var ymin = 0;
    var ymax = 0;
	var yavg = 0;
	var ystd = 0;
	var zmin = 0;
    var zmax = 0;
	var zavg = 0;
	var zstd = 0;
	var rforce = 0;

    var amq = org.activemq.Amq;
    amq.init({ 
     uri: 'amq',
     logging: true,
     timeout: 20
    });
	
	var myHandler =
      {
        rcvMessage: function(message)
        {

			pid = message.getAttribute('pid');
			step = message.getAttribute('step');
			spo2 = message.getAttribute('spo2');
			xmin = message.getAttribute('xmin');
			xmax = message.getAttribute('xmax');
			xavg = message.getAttribute('xavg');
			xstd = message.getAttribute('xstd');
			ymin = message.getAttribute('ymin');
			ymax = message.getAttribute('ymax');
			yavg = message.getAttribute('yavg');
			ystd = message.getAttribute('ystd');
			zmin = message.getAttribute('zmin');
			zmax = message.getAttribute('zmax');
			zavg = message.getAttribute('zavg');
			zstd = message.getAttribute('zstd');
			rforce = message.getAttribute('rforce');

			$("dispDiv").append("<b>pid:</b> "+pid+"<br>");
			$("dispDiv").append("<b>step:</b> "+step+", <b>spo2:</b> "+spo2+", <b>rforce:</b> "+rforce+"<br>");
			$("dispDiv").append("<b>xmin:</b> "+xmin+", <b>xmax:</b> "+xmax+", <b>xavg:</b> "+xavg+", <b>xstd:</b> "+xstd+"<br>");
			$("dispDiv").append("<b>ymin:</b> "+ymin+", <b>ymax:</b> "+ymax+", <b>yavg:</b> "+yavg+", <b>ystd:</b> "+ystd+"<br>");
			$("dispDiv").append("<b>zmin:</b> "+zmin+", <b>zmax:</b> "+zmax+", <b>zavg:</b> "+zavg+", <b>zstd:</b> "+zstd+"<br><br><br>");
        },
        myId: 'test0',
        myDestination: 'topic://MobiliSE_raw_conv'
      };
 
	amq.addListener(myHandler.myId, myHandler.myDestination,myHandler.rcvMessage);
  </script>
 </head>
 <body>
	<div id="dispDiv" style="width:100%; height:500px; font-size:11px;"></div>
 </body>
</html>